<h1>Editar Reserva #{{ reserva.pk }}</h1>

<h2>Datos de la Reserva</h2>
<form method="post">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit">💾 Guardar Cambios</button>
</form>

<hr>

<h2>Habitaciones de la Reserva</h2>

<a href="{% url 'agregar_habitacion_reserva' reserva.pk %}">➕ Agregar Habitación</a>

<table border="1" style="margin-top: 10px; width: 100%; border-collapse: collapse;">
    <thead>
        <tr style="background-color: #f0f0f0;">
            <th>Habitación</th>
            <th>Tipo</th>
            <th>Tarifa</th>
            <th>Canal de Venta</th>
            <th>Moneda</th>
            <th>Monto ARS</th>
            <th>Estado</th>
        </tr>
    </thead>
    <tbody>
        {% for hab in reserva.habitaciones.select_related "habitacion","tarifa" %}
        <tr>
            <td>{{ hab.habitacion.numero }}</td>
            <td>{{ hab.habitacion.tipo_habitacion.nombre }}</td>
            <td>{{ hab.tarifa.monto }}</td>
            <td>{{ hab.tarifa.canal_venta.nombre }}</td>
            <td>{{ hab.moneda_original.codigo }}</td>
            <td>{{ hab.monto_ars }}</td>
            <td>{{ hab.habitacion.get_estado_display }}</td>
        </tr>
        {% empty %}
        <tr><td colspan="7">No hay habitaciones agregadas.</td></tr>
        {% endfor %}
    </tbody>
</table>

<hr>

<a href="{% url 'lista_reservas' %}">⬅️ Volver a la lista de reservas</a>
