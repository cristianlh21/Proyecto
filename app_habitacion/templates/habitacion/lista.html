<!-- templates/habitaciones/lista_habitaciones.html -->
<h1>Listado de Habitaciones</h1>

<form method="get">
    <label for="estado">Filtrar por estado:</label>
    <select name="estado" id="estado" onChange="this.form.submit()">
        <option value="">-- Todos --</option>
        <option value="DISPONIBLE" {% if estado == "DISPONIBLE" %}selected{% endif %}>Disponible</option>
        <option value="OCUPADA" {% if estado == "OCUPADA" %}selected{% endif %}>Ocupada</option>
        <option value="RESERVADA" {% if estado == "RESERVADA" %}selected{% endif %}>Reservada</option>
        <option value="LIMPIEZA" {% if estado == "LIMPIEZA" %}selected{% endif %}>Limpieza</option>
        <option value="EN MANTENIMIENTO" {% if estado == "EN MANTENIMIENTO" %}selected{% endif %}>En mantenimiento</option>
        <option value="BAJA" {% if estado == "BAJA" %}selected{% endif %}>Baja</option>
        <option value="SIN USO" {% if estado == "SIN USO" %}selected{% endif %}>Sin uso</option>
    </select>
</form>

<table border="1">
    <tr>
        <th>Número</th>
        <th>Tipo</th>
        <th>Piso</th>
        <th>Estado</th>
        <th>Acciones</th>
    </tr>
    {% for h in habitaciones %}
    <tr>
        <td>{{ h.numero }}</td>
        <td>{{ h.tipo_habitacion.nombre }}</td>
        <td>{{ h.piso }}</td>
        <td>{{ h.get_estado_display }}</td>
        <td>
            <a href="{% url 'editar_habitacion' h.id %}">✏️ Editar</a> | 
            <a href="{% url 'eliminar_habitacion' h.id %}">🗑️ Eliminar</a>
        </td>
    </tr>
    {% empty %}
    <tr><td colspan="5">No hay habitaciones disponibles</td></tr>
    {% endfor %}
</table>
